---
title: "游깴 Visualizaci칩n de Datos Geogr치ficos: Mi Mapa de Viajes"
author: "Fabricio Lennart"
date: "2025-11-30"
format:
  html:
    theme: flatly
    toc: true
    toc-location: left
    code-fold: true
    code-summary: "Ver C칩digo"
jupyter: python3
execute:
  echo: true
  warning: false
  message: false
---

## Introducci칩n

La visualizaci칩n de datos geogr치ficos es una herramienta poderosa para contar historias con ubicaciones. En este proyecto, exploramos diferentes formas de representar datos de viajes usando **Plotly**, una biblioteca de Python que permite crear gr치ficos interactivos.

**Mi historia de viajes:**
- 游游 Empec칠 en Bolivia (pa칤s natal)
- Viaj칠 a Rep칰blica Dominicana, Argentina y Brasil
- 游游 Actualmente vivo en Brasil
- Desde aqu칤 planeo mis pr칩ximos destinos

### 쯇or qu칠 visualizar datos geogr치ficos?

- **Contexto espacial**: Los mapas ayudan a entender relaciones geogr치ficas de forma intuitiva
- **Interactividad**: Permite explorar los datos haciendo hover, zoom, y filtros
- **Storytelling**: Comunica narrativas personales o patrones globales de forma visual

En este caso, creamos un mapa personal de viajes que muestra:

- 游릭 **Pa칤ses visitados** (en verde): Bolivia, Rep칰blica Dominicana, Argentina, Brasil
- 游댮 **Bucket list** (en rojo, con l칤neas desde Brasil): Mis pr칩ximos destinos so침ados

---

## Preparaci칩n de Datos

```{python}
import pandas as pd
import plotly.graph_objects as go

# Cargar datos desde CSV
path = "/home/fabri/Projects/data-visualization-gallery/resources/paises.csv"
df = pd.read_csv(path)

# Definir coordenadas geogr치ficas (latitud, longitud) para cada pa칤s
# Estas coordenadas representan aproximadamente el centro geogr치fico de cada pa칤s
coords = {
    'ARG': (-38.4161, -63.6167),   # Argentina
    'BRA': (-14.2350, -51.9253),   # Brasil
    'BOL': (-16.2902, -63.5887),   # Bolivia
    'DOM': (18.7357, -70.1627),    # Rep칰blica Dominicana
    'ESP': (40.4637, -3.7492),     # Espa침a
    'POL': (51.9194, 19.1451),     # Polonia
    'AUS': (-25.2744, 133.7751),   # Australia
    'ARE': (23.4241, 53.8478),     # Emiratos 츼rabes (Dubai)
    'JPN': (36.2048, 138.2529),    # Jap칩n
    'CHN': (35.8617, 104.1954),    # China
    'USA': (37.0902, -95.7129)     # Estados Unidos
}

# Agregar coordenadas al DataFrame
df['lat'] = df['country_code'].map(lambda x: coords.get(x, (0,0))[0])
df['lon'] = df['country_code'].map(lambda x: coords.get(x, (0,0))[1])

print(f"Total de pa칤ses: {len(df)}")
print(f"Visitados: {len(df[df['interest_category'] == 'Conozco'])}")
print(f"Por visitar: {len(df[df['interest_category'] == 'Quiero Conocer'])}")
```

### Nota sobre coordenadas geogr치ficas

Las coordenadas geogr치ficas se expresan como pares `(latitud, longitud)`:

- **Latitud**: De -90춿 (Polo Sur) a +90춿 (Polo Norte)
- **Longitud**: De -180춿 (oeste) a +180춿 (este), con 0춿 en Greenwich, Londres

---

## Mapa Interactivo con Rutas

Este mapa utiliza `plotly.graph_objects` para crear una visualizaci칩n personalizada que muestra:

1. **Pa칤ses visitados** como c칤rculos s칩lidos verdes
2. **Destinos deseados** como c칤rculos rojos con l칤neas punteadas desde Argentina
3. **Interactividad** al pasar el mouse sobre cada pa칤s

```{python}
# Crear figura vac칤a
fig = go.Figure()

# Coordenadas de Brasil (ubicaci칩n actual - punto de partida para futuros viajes)
brasil_lat, brasil_lon = coords['BRA']

# PASO 1: Visualizar pa칤ses visitados (verde)
visited = df[df['interest_category'] == 'Conozco']

for _, row in visited.iterrows():
    fig.add_trace(go.Scattergeo(
        lon=[row['lon']],
        lat=[row['lat']],
        mode='markers+text',
        marker=dict(
            size=25, 
            color='#27ae60',           # Verde
            line=dict(width=2, color='white')  # Borde blanco
        ),
        text=row['country_name'],
        textposition="top center",
        textfont=dict(size=10, color='#27ae60', family='Arial Black'),
        name='Visitado',
        showlegend=(row['country_code'] == 'ARG'),  # Solo mostrar una vez en leyenda
        hovertemplate=f"<b>{row['country_name']}</b><br>{row['notes']}<extra></extra>"
    ))

# PASO 2: Visualizar bucket list con l칤neas desde Brasil (rojo)
to_visit = df[df['interest_category'] == 'Quiero Conocer']

for _, row in to_visit.iterrows():
    # Dibujar l칤nea desde Brasil hasta el destino
    fig.add_trace(go.Scattergeo(
        lon=[brasil_lon, row['lon']],
        lat=[brasil_lat, row['lat']],
        mode='lines',
        line=dict(
            width=1, 
            color='rgba(231, 76, 60, 0.3)',  # Rojo semi-transparente
            dash='dot'                        # L칤nea punteada
        ),
        showlegend=False,
        hoverinfo='skip'
    ))
    
    # Agregar marcador del destino
    fig.add_trace(go.Scattergeo(
        lon=[row['lon']],
        lat=[row['lat']],
        mode='markers+text',
        marker=dict(
            size=20, 
            color='#e74c3c',           # Rojo
            line=dict(width=2, color='white')
        ),
        text=row['country_name'],
        textposition="top center",
        textfont=dict(size=10, color='#e74c3c', family='Arial Black'),
        name='Bucket List',
        showlegend=(row['country_code'] == 'ESP'),  # Solo mostrar una vez
        hovertemplate=f"<b>{row['country_name']}</b><br>{row['notes']}<extra></extra>"
    ))

# PASO 3: Configurar el mapa base
fig.update_geos(
    showcountries=True,
    countrycolor="#e0e0e0",      # Pa칤ses en gris claro
    showcoastlines=True,
    coastlinecolor="#b0b0b0",    # Costas en gris
    showland=True,
    landcolor="#fafafa",         # Tierra en blanco
    showocean=True,
    oceancolor="#d4e8f0",        # Oc칠ano en azul claro
    projection_type='natural earth'  # Proyecci칩n cartogr치fica
)

# PASO 4: Configurar dise침o general
fig.update_layout(
    title='九걾잺 Mis Pr칩ximos Destinos desde Brasil',
    title_x=0.5,
    title_font_size=18,
    height=600,
    margin={"r":10,"t":60,"l":10,"b":10},
    showlegend=True,
    legend=dict(x=0.01, y=0.99)
)

fig.show()
```

---

## Conceptos Clave en Visualizaci칩n Geogr치fica

### 1. Proyecciones Cartogr치ficas

Un mapa 2D de la Tierra siempre distorsiona de alguna forma. Plotly ofrece varias proyecciones:

- **Natural Earth**: Balanceada, ideal para mapas mundiales (usada aqu칤)
- **Mercator**: Distorsiona tama침os cerca de los polos
- **Orthographic**: Vista de globo terr치queo

### 2. Scattergeo vs Choropleth

- **Scattergeo** (usado aqu칤): Puntos y l칤neas sobre un mapa, ideal para rutas y ubicaciones espec칤ficas
- **Choropleth**: Pa칤ses coloreados seg칰n una variable (densidad, categor칤as), ideal para comparaciones regionales

### 3. Capas y Trazas

Plotly permite superponer m칰ltiples capas (`traces`). En este mapa:

- Cada pa칤s es una traza independiente
- Las l칤neas son trazas adicionales
- Esto permite control granular sobre estilos y hover

### 4. Interactividad

Los mapas de Plotly incluyen autom치ticamente:

- **Zoom** con scroll del mouse
- **Pan** arrastrando el mapa
- **Hover** para mostrar informaci칩n detallada
- **Leyenda** clickeable para mostrar/ocultar categor칤as

---

## Conclusi칩n

Este proyecto demuestra c칩mo transformar datos tabulares simples (pa칤ses, coordenadas, categor칤as) en una narrativa visual geogr치fica interactiva. La visualizaci칩n de datos geogr치ficos es especialmente 칰til en:

- An치lisis de log칤stica y rutas
- Dashboards de ventas por regi칩n
- Estudios de migraci칩n y demograf칤a
- Mapas de proyectos personales (como este)

**Pr칩ximos pasos**: Podr칤as extender este proyecto agregando fechas de viaje, fotos, o conect치ndolo con APIs de clima o costos de vuelos.